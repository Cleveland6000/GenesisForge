{
    "version": "2.0.0",
    "tasks": [
        {
            "type": "cppbuild",
            "label": "Build OpenGL App Only",
            "command": "C:\\msys64\\mingw64\\bin\\g++.exe",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${workspaceFolder}\\src\\*.cpp",
                "${workspaceFolder}\\src\\*.c",
                "-o",
                "${workspaceFolder}\\build\\opengl_app.exe",
                "-I${workspaceFolder}\\src",
                "-I${workspaceFolder}\\dependencies\\include",
                "-L${workspaceFolder}\\dependencies\\lib",
                "-lglfw3",
                "-lgdi32",
                "-lopengl32",
                "-luser32",
                "-lkernel32",
                "-lmingw32",
                "-lmsvcrt",
                "-lm"
            ],
            "options": {
                "cwd": "${workspaceFolder}",
                "shell": {
                    "executable": "C:\\Program Files\\Git\\bin\\bash.exe",
                    "args": [
                        "-c"
                    ]
                }
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "detail": "compiler: C:\\msys64\\mingw64\\bin\\g++.exe",
            "presentation": { // ビルド中にターミナル表示
                "reveal": "always",
                "panel": "shared", // 共有パネルにして、次の実行結果も同じパネルに表示
                "clear": true // ビルド前にターミナルをクリア
            }
        },
        {
            "label": "Run OpenGL App Only",
            "type": "process",
            "command": "${workspaceFolder}\\build\\opengl_app.exe",
            "options": {
                "cwd": "${workspaceFolder}\\build",
                "shell": {
                    "executable": "C:\\Program Files\\Git\\bin\\bash.exe",
                    "args": [
                        "-c"
                    ]
                }
            },
            "group": {
                "kind": "build",
                "isDefault": false
            },
            "problemMatcher": [],
            "detail": "Runs the compiled OpenGL application.",
            "presentation": { // 実行中にターミナル表示（ビルドと同じパネル）
                "reveal": "always",
                "panel": "shared",
                "clear": false // 前のビルドログを残すためにクリアしない
            }
        },
        {
            "label": "Build and Run OpenGL App",
            "dependsOn": [
                "Build OpenGL App Only",
                "Run OpenGL App Only"
            ],
            "dependsOrder": "sequence", // ここが重要！依存タスクを順番に実行させる
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Builds the OpenGL application and then runs it.",
            "problemMatcher": []
        }
    ]
}